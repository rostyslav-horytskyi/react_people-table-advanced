(this["webpackJsonpreact_people-table"]=this["webpackJsonpreact_people-table"]||[]).push([[0],{26:function(e,t,a){e.exports=a(47)},31:function(e,t,a){},47:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(23),c=a.n(l),o=a(8),s=a(1),u=(a(31),a(32),function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:"header"},r.a.createElement("nav",null,r.a.createElement(o.c,{to:"/",exact:!0,activeClassName:"is-active"},r.a.createElement("button",{className:"button is-dark",type:"button"},"Home")),r.a.createElement(o.c,{to:"people",activeClassName:"is-active"},r.a.createElement("button",{className:"button is-dark",type:"button"},"People")))))}),m=function(){return r.a.createElement("h2",null,"Home page")},i=function(){return r.a.createElement("h2",null,"Page not found")},d=a(4),h=a(25),b=a.n(h),E=a(7),p=r.a.createContext({people:[],setPeople:function(){}}),g=function(e){var t=e.children,a=Object(n.useState)([]),l=Object(d.a)(a,2),c=l[0],o=l[1];Object(n.useEffect)((function(){fetch("https://mate-academy.github.io/react_people-table/api/people.json").then((function(e){return e.json()})).then(o)}),[]);var s={people:c,setPeople:o};return r.a.createElement(p.Provider,{value:s},t)},f=function(e){var t=e.name,a=e.sex,n=e.slug;return r.a.createElement(o.b,{to:"/people/".concat(n),style:{color:"f"===a?"red":"m"===a?"blue":"black"}},t)},v=r.a.memo((function(e){var t=Object(s.h)(),a=t.pathname,n=t.search,l=e.person,c=l.name,o=l.sex,u=l.born,m=l.died,i=l.motherName,d=l.fatherName,h=l.slug,b=e.mother,E=e.father;return r.a.createElement("tr",{className:"Person",style:{backgroundColor:a.includes(h)?"yellow":""}},r.a.createElement("td",{style:{backgroundColor:n.includes("name")?"#c0c0c0":""}},r.a.createElement(f,{name:c,sex:o,slug:h})),r.a.createElement("td",{style:{backgroundColor:n.includes("sex")?"#c0c0c0":""}},o),r.a.createElement("td",{style:{backgroundColor:n.includes("born")?"#c0c0c0":""}},u),r.a.createElement("td",{style:{backgroundColor:n.includes("died")?"#c0c0c0":""}},m),r.a.createElement("td",null,r.a.createElement(f,{name:b?b.name:i,sex:b?b.sex:"",slug:b?b.slug:""})),r.a.createElement("td",null,r.a.createElement(f,{name:E?E.name:d,sex:E?E.sex:"",slug:E?E.slug:""})))})),O={borderCollapse:"collapse"},j=r.a.memo((function(e){var t=Object(n.useContext)(p).people,a=e.query.toLowerCase(),l=e.sortBy,c=e.handleSortChange,o=e.sortOrder,s=e.query?t.filter((function(e){return e.name&&e.motherName&&e.fatherName?e.name.toLocaleLowerCase().includes(a)||e.motherName.toLocaleLowerCase().includes(a)||e.fatherName.toLocaleLowerCase().includes(a):null})):t,u=function(){var e=t;if(l&&"asc"===o)switch(l){case"name":case"sex":e=Object(E.a)(s).sort((function(e,t){return e[l].localeCompare(t[l])}));break;case"born":case"died":e=Object(E.a)(s).sort((function(e,t){return+e[l]-+t[l]}));break;default:e=Object(E.a)(s)}return l&&"desc"===o&&(e=Object(E.a)(s).reverse()),l||o||(e=s),e},m=function(e){return u().find((function(t){return e===t.name}))},i=function(e){return"asc"===o&&l===e?r.a.createElement("img",{src:"/images/sort_asc.png",alt:e}):"desc"===o&&l===e?r.a.createElement("img",{src:"/images/sort_desc.png",alt:e}):r.a.createElement("img",{src:"/images/sort_both.png",alt:e})};return r.a.createElement("div",{className:"table_root"},r.a.createElement("table",{style:O,className:"table is-bordered is-striped is-narrow is-hoverable is-fullwidth"},r.a.createElement("thead",null,r.a.createElement("tr",{onClick:c},r.a.createElement("th",null,"Name",i("name")),r.a.createElement("th",null,"Sex",i("sex")),r.a.createElement("th",null,"Born",i("born")),r.a.createElement("th",null,"Died",i("died")),r.a.createElement("th",null,"Mother"),r.a.createElement("th",null,"Father"))),r.a.createElement("tbody",null,u().map((function(e){return r.a.createElement(v,{key:e.name,person:e,mother:m(e.motherName),father:m(e.fatherName)})})))))})),C=a(13),N=a.n(C),y=function(){var e=Object(n.useContext)(p),t=e.people,a=e.setPeople,l=Object(n.useState)(""),c=Object(d.a)(l,2),o=c[0],s=c[1],u=Object(n.useState)(""),m=Object(d.a)(u,2),i=m[0],h=m[1],b=Object(n.useState)(""),g=Object(d.a)(b,2),f=g[0],v=g[1],O=Object(n.useState)(""),j=Object(d.a)(O,2),C=j[0],y=j[1],x=Object(n.useState)(""),k=Object(d.a)(x,2),S=k[0],w=k[1],F=Object(n.useState)(""),L=Object(d.a)(F,2),B=L[0],_=L[1],P=Object(n.useState)([]),q=Object(d.a)(P,2),A=q[0],z=q[1],I=Object(n.useState)(!1),M=Object(d.a)(I,2),Z=M[0],D=M[1],H=o.match(/^['A-Za-z\u0410-\u044F][ '\x2DA-Za-z\u0410-\u044F]+['A-Za-z\u0410-\u044F]?$/),J=+f>=1400&&+f<=2021&&f.length>0,R=+C<=2021&&+C>=+f&&C.length>0,T=+C-+f,U=T>=0&&T<=150;return r.a.createElement("div",{className:"control"},r.a.createElement("form",{action:""},Z&&r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{htmlFor:"name",onBlur:function(){return z([].concat(Object(E.a)(A),["name"]))}},r.a.createElement("p",null,"Enter name:"),r.a.createElement("input",{className:N()("input","is-rounded",{"is-danger":!H&&o.length>0}),type:"text",name:"name",id:"name",value:o,onChange:function(e){return s(e.target.value)}})),!H&&o.length>0&&r.a.createElement("div",{className:"Error"},"Incorrect name!"),r.a.createElement("label",{htmlFor:"sex",className:"radio"},r.a.createElement("p",null,"Choose sex:"),r.a.createElement("input",{type:"radio",name:"answer",id:"m",checked:"m"===i,onChange:function(e){return h(e.target.id)}}),"Male",r.a.createElement("input",{type:"radio",name:"answer",id:"f",checked:"f"===i,onChange:function(e){return h(e.target.id)}}),"Female"),r.a.createElement("label",{htmlFor:"born",onBlur:function(){return z([].concat(Object(E.a)(A),["born"]))}},r.a.createElement("p",null,"Choose born date:"),r.a.createElement("input",{className:N()("input","is-rounded",{"is-danger":!J&&f.length>0}),type:"number",name:"born",id:"born",value:f||"",onChange:function(e){return v(e.target.value)}})),!J&&f.length>0&&r.a.createElement("div",{className:"Error"},"Year of birth must be greater than 1400 and less 2021!"),r.a.createElement("label",{htmlFor:"died",onBlur:function(){return z([].concat(Object(E.a)(A),["died"]))}},r.a.createElement("p",null,"Choose died date:"),r.a.createElement("input",{className:N()("input","is-rounded",{"is-danger":!R&&C.length>0}),type:"number",name:"died",id:"died",value:C||"",onChange:function(e){return y(e.target.value)},disabled:!J})),!R&&C.length>0&&r.a.createElement("div",{className:"Error"},"Incorect date of death!"),!U&&f.length>0&&C.length>0&&r.a.createElement("div",{className:"Error"},"Total age should be in the range 0 - 150!"),r.a.createElement("div",{className:"select is-rounded"},r.a.createElement("label",{htmlFor:"mother",className:"my_select"},r.a.createElement("p",null,"Choose mother:",r.a.createElement("span",null,"*")),r.a.createElement("select",{id:"mother",value:S,onChange:function(e){return w(e.target.value)},disabled:+f<1400},r.a.createElement("option",null,"Select mother"),t.filter((function(e){return"f"===e.sex&&+e.died>+f})).map((function(e){return r.a.createElement("option",{key:e.name},e.name)}))))),r.a.createElement("div",{className:"select is-rounded"},r.a.createElement("label",{htmlFor:"father",className:"my_select"},r.a.createElement("p",null,"Choose father:",r.a.createElement("span",null,"*")),r.a.createElement("select",{id:"father",value:B,onChange:function(e){return _(e.target.value)},disabled:+f<1400},r.a.createElement("option",null,"Select father"),t.filter((function(e){return"m"===e.sex&&+e.died>+f})).map((function(e){return r.a.createElement("option",{key:e.name},e.name)})))))),r.a.createElement("button",{id:"submit",type:"button",className:"button is-light",disabled:(!H||!i||!J||+f<1871&&+C<+f)&&Z,onClick:function(){!function(){var e={name:o,sex:i,born:f,died:C,motherName:S,fatherName:B,slug:"".concat(o.toLocaleLowerCase().trim().split(" ").join("-"),"-").concat(f)};Z&&a([e].concat(Object(E.a)(t)))}(),D(!Z),s(""),h(""),y(""),v(""),w(""),_("")}},"Add person")))},x=function(){var e=Object(s.h)().search,t=Object(s.g)(),a=new URLSearchParams(e),l=a.get("query")||"",c=Object(n.useState)(l),o=Object(d.a)(c,2),u=o[0],m=o[1],i=a.get("sortBy")||"",h=a.get("sortOrder")||"",E=Object(n.useCallback)(b()((function(e){e?a.set("query",e):a.delete("query"),t.push({search:a.toString()})}),1e3),[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"People page"),r.a.createElement("div",{className:"table_settings"},r.a.createElement("input",{type:"text",className:"input is-rounded",placeholder:"Search...",value:u,onChange:function(e){return t=e.target.value,m(t),void E(t);var t}}),r.a.createElement(y,null)),r.a.createElement(j,{query:l,handleSortChange:function(e){var n=e.target.textContent;"Mother"===n||"Father"===n?(a.delete("sortBy"),a.delete("sortOrder")):null!==n&&(a.set("sortBy",n.toLowerCase()),a.set("sortOrder","asc"),n.toLowerCase()===i&&"asc"===h?a.set("sortOrder","desc"):a.set("sortOrder","asc")),t.push({search:a.toString()})},sortBy:i,sortOrder:h}))},k=function(){return r.a.createElement(g,null,r.a.createElement("div",{className:"content is-medium"},r.a.createElement("div",{className:"App"},r.a.createElement(u,null),r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/",exact:!0,component:m}),r.a.createElement(s.b,{path:"/people",component:x}),r.a.createElement(s.a,{path:"/home",to:"/"}),r.a.createElement(i,null)))))};c.a.render(r.a.createElement(o.a,null,r.a.createElement(k,null)),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.46119fd1.chunk.js.map