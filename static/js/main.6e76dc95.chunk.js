(this["webpackJsonpreact_people-table"]=this["webpackJsonpreact_people-table"]||[]).push([[0],{27:function(e,t,a){e.exports=a(48)},32:function(e,t,a){},48:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(24),c=a.n(l),o=a(9),s=a(1),m=(a(32),a(33),function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:"header"},r.a.createElement("nav",null,r.a.createElement(o.c,{to:"/",exact:!0,activeClassName:"is-active"},r.a.createElement("button",{className:"button is-dark",type:"button"},"Home")),r.a.createElement(o.c,{to:"people",activeClassName:"is-active"},r.a.createElement("button",{className:"button is-dark",type:"button"},"People")))))}),u=function(){return r.a.createElement("h2",null,"Home page")},i=function(){return r.a.createElement("h2",null,"Page not found")},d=a(8),h=a(26),b=a.n(h),E=a(7),p=r.a.createContext({people:[],setPeople:function(){}}),f=function(e){var t=e.children,a=Object(n.useState)([]),l=Object(d.a)(a,2),c=l[0],o=l[1];Object(n.useEffect)((function(){fetch("https://mate-academy.github.io/react_people-table/api/people.json").then((function(e){return e.json()})).then(o)}),[]);var s={people:c,setPeople:o};return r.a.createElement(p.Provider,{value:s},t)},g=function(e){var t=e.name,a=e.sex,n=e.slug;return r.a.createElement(o.b,{to:"/people/".concat(n),style:{color:"f"===a?"red":"m"===a?"blue":"black"}},t)},v=r.a.memo((function(e){var t=Object(s.h)(),a=t.pathname,n=t.search,l=e.person,c=l.name,o=l.sex,m=l.born,u=l.died,i=l.motherName,d=l.fatherName,h=l.slug,b=e.mother,E=e.father;return r.a.createElement("tr",{className:"Person",style:{backgroundColor:a.includes(h)?"yellow":""}},r.a.createElement("td",{style:{backgroundColor:n.includes("name")?"#c0c0c0":""}},r.a.createElement(g,{name:c,sex:o,slug:h})),r.a.createElement("td",{style:{backgroundColor:n.includes("sex")?"#c0c0c0":""}},o),r.a.createElement("td",{style:{backgroundColor:n.includes("born")?"#c0c0c0":""}},m),r.a.createElement("td",{style:{backgroundColor:n.includes("died")?"#c0c0c0":""}},u),r.a.createElement("td",null,r.a.createElement(g,{name:b?b.name:i,sex:b?b.sex:"",slug:b?b.slug:""})),r.a.createElement("td",null,r.a.createElement(g,{name:E?E.name:d,sex:E?E.sex:"",slug:E?E.slug:""})))})),O={borderCollapse:"collapse"},j=r.a.memo((function(e){var t=Object(n.useContext)(p).people,a=e.query.toLowerCase(),l=e.sortBy,c=e.handleSortChange,o=e.sortOrder,s=e.query?t.filter((function(e){return e.name&&e.motherName&&e.fatherName?(e.name+e.motherName+e.fatherName).toLowerCase().includes(a):null})):t,m=function(){var e=t;if(l&&"asc"===o)switch(l){case"name":case"sex":e=Object(E.a)(s).sort((function(e,t){return e[l].localeCompare(t[l])}));break;case"born":case"died":e=Object(E.a)(s).sort((function(e,t){return+e[l]-+t[l]}));break;default:e=Object(E.a)(s)}return l&&"desc"===o&&(e=Object(E.a)(s).reverse()),l||o||(e=s),e},u=function(e){return m().find((function(t){return e===t.name}))},i=function(e){return"asc"===o&&l===e?r.a.createElement("img",{src:"images/sort_asc.png",alt:e}):"desc"===o&&l===e?r.a.createElement("img",{src:"images/sort_desc.png",alt:e}):r.a.createElement("img",{src:"images/sort_both.png",alt:e})};return r.a.createElement("div",{className:"table_root"},r.a.createElement("table",{style:O,className:"table is-bordered is-striped is-narrow is-hoverable is-fullwidth"},r.a.createElement("thead",null,r.a.createElement("tr",{onClick:c},r.a.createElement("th",null,"Name",i("name")),r.a.createElement("th",null,"Sex",i("sex")),r.a.createElement("th",null,"Born",i("born")),r.a.createElement("th",null,"Died",i("died")),r.a.createElement("th",null,"Mother"),r.a.createElement("th",null,"Father"))),r.a.createElement("tbody",null,m().map((function(e){return r.a.createElement(v,{key:e.name,person:e,mother:u(e.motherName),father:u(e.fatherName)})})))))})),N=a(3),y=a(14),C=a.n(y),x=function(e){return e.match(/^['A-Za-z\u0410-\u044F][ '\x2DA-Za-z\u0410-\u044F]+['A-Za-z\u0410-\u044F]?$/)},k=function(e,t){return+t<=2021&&+t>=+e&&t.length>0},S=function(e){return+e>=1400&&+e<=2021&&e.length>0},w=function(){var e=Object(n.useContext)(p),t=e.people,a=e.setPeople,l=Object(n.useState)({name:"",sex:"",born:"",died:"",mother:"",father:""}),c=Object(d.a)(l,2),o=c[0],s=c[1],m=Object(n.useState)([]),u=Object(d.a)(m,2),i=u[0],h=u[1],b=Object(n.useState)(!1),f=Object(d.a)(b,2),g=f[0],v=f[1],O=o.name,j=o.sex,y=o.born,w=o.died,F=o.mother,B=o.father;return r.a.createElement("div",{className:"control"},r.a.createElement("form",{action:"",onSubmit:function(e){e.preventDefault(),function(){var e={name:O,sex:j,born:y,died:w,motherName:"Select mother"===F?"":F,fatherName:"Select father"===B?"":B,slug:"".concat(O.toLocaleLowerCase().trim().split(" ").join("-"),"-").concat(y)};g&&a([e].concat(Object(E.a)(t)))}(),v(!g),s({name:"",sex:"",born:"",died:"",mother:"",father:""})}},g&&r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{htmlFor:"name",onBlur:function(){return h([].concat(Object(E.a)(i),["name"]))}},r.a.createElement("p",null,"Enter name:"),r.a.createElement("input",{className:C()("input","is-rounded",{"is-danger":!x(O)&&O.length>0}),type:"text",name:"name",id:"name",value:O,onChange:function(e){return s(Object(N.a)(Object(N.a)({},o),{},{name:e.target.value}))}})),!x(O)&&O.length>0&&r.a.createElement("div",{className:"Error"},"Incorrect name!"),r.a.createElement("label",{htmlFor:"sex",className:"radio"},r.a.createElement("p",null,"Choose sex:"),r.a.createElement("input",{type:"radio",name:"answer",id:"m",checked:"m"===j,onChange:function(e){return s(Object(N.a)(Object(N.a)({},o),{},{sex:e.target.id}))}}),"Male",r.a.createElement("input",{type:"radio",name:"answer",id:"f",checked:"f"===j,onChange:function(e){return s(Object(N.a)(Object(N.a)({},o),{},{sex:e.target.id}))}}),"Female"),r.a.createElement("label",{htmlFor:"born",onBlur:function(){return h([].concat(Object(E.a)(i),["born"]))}},r.a.createElement("p",null,"Choose born date:"),r.a.createElement("input",{className:C()("input","is-rounded",{"is-danger":!S(y)&&y.length>0}),type:"number",name:"born",id:"born",value:y||"",onChange:function(e){return s(Object(N.a)(Object(N.a)({},o),{},{born:e.target.value}))}})),!S(y)&&y.length>0&&r.a.createElement("div",{className:"Error"},"Year of birth must be greater than 1400 and less 2021!"),r.a.createElement("label",{htmlFor:"died",onBlur:function(){return h([].concat(Object(E.a)(i),["died"]))}},r.a.createElement("p",null,"Choose died date:"),r.a.createElement("input",{className:C()("input","is-rounded",{"is-danger":!k(y,w)&&w.length>0}),type:"number",name:"died",id:"died",value:w||"",onChange:function(e){return s(Object(N.a)(Object(N.a)({},o),{},{died:e.target.value}))},disabled:!S(y)})),!k(y,w)&&w.length>0&&r.a.createElement("div",{className:"Error"},"Incorect date of death!"),!function(e,t){var a=+t-+e;return a>=0&&a<=150}(y,w)&&y.length>0&&w.length>0&&r.a.createElement("div",{className:"Error"},"Total age should be in the range 0 - 150!"),+y<1871&&4===y.length&&r.a.createElement("div",{className:"Error"},"Please enter the date of death!"),r.a.createElement("div",{className:"select is-rounded"},r.a.createElement("label",{htmlFor:"mother",className:"my_select"},r.a.createElement("p",null,"Choose mother:",r.a.createElement("span",null,"*")),r.a.createElement("select",{id:"mother",value:F,onChange:function(e){return s(Object(N.a)(Object(N.a)({},o),{},{mother:e.target.value}))},disabled:+y<1400},r.a.createElement("option",null,"Select mother"),t.filter((function(e){return"f"===e.sex&&+e.died>+y})).map((function(e){return r.a.createElement("option",{key:e.name},e.name)}))))),r.a.createElement("div",{className:"select is-rounded"},r.a.createElement("label",{htmlFor:"father",className:"my_select"},r.a.createElement("p",null,"Choose father:",r.a.createElement("span",null,"*")),r.a.createElement("select",{id:"father",value:B,onChange:function(e){return s(Object(N.a)(Object(N.a)({},o),{},{father:e.target.value}))},disabled:+y<1400},r.a.createElement("option",null,"Select father"),t.filter((function(e){return"m"===e.sex&&+e.died>+y})).map((function(e){return r.a.createElement("option",{key:e.name},e.name)})))))),r.a.createElement("button",{id:"submit",type:"submit",className:"button is-light",disabled:(!x(O)||!j||!S(y)||+y<1871&&+w<+y)&&g},"Add person")))},F=function(){var e=Object(s.h)().search,t=Object(s.g)(),a=new URLSearchParams(e),l=a.get("query")||"",c=Object(n.useState)(l),o=Object(d.a)(c,2),m=o[0],u=o[1],i=a.get("sortBy")||"",h=a.get("sortOrder")||"",E=Object(n.useCallback)(b()((function(e){e?a.set("query",e):a.delete("query"),t.push({search:a.toString()})}),1e3),[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"People page"),r.a.createElement("div",{className:"table_settings"},r.a.createElement("input",{type:"text",className:"input is-rounded",placeholder:"Search...",value:m,onChange:function(e){var t,a=e.target;return t=a.value,u(t),void E(t)}}),r.a.createElement(w,null)),r.a.createElement(j,{query:l,handleSortChange:function(e){var n=e.target.textContent;if(null!==n)switch(n){case"Mother":case"Father":a.delete("sortBy"),a.delete("sortOrder");break;default:a.set("sortBy",n.toLocaleLowerCase()),a.set("sortOrder","asc"),n.toLocaleLowerCase()===i&&"asc"===h?a.set("sortOrder","desc"):a.set("sortOrder","asc")}t.push({search:a.toString()})},sortBy:i,sortOrder:h}))},B=function(){return r.a.createElement(f,null,r.a.createElement("div",{className:"content is-medium"},r.a.createElement("div",{className:"App"},r.a.createElement(m,null),r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/",exact:!0,component:u}),r.a.createElement(s.b,{path:"/people",component:F}),r.a.createElement(s.a,{path:"/home",to:"/"}),r.a.createElement(i,null)))))};c.a.render(r.a.createElement(o.a,null,r.a.createElement(B,null)),document.getElementById("root"))}},[[27,1,2]]]);
//# sourceMappingURL=main.6e76dc95.chunk.js.map